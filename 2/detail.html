<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Project Detail</title>
<link rel="icon" type="image/png" href="/test/images/fav2.png"/>
<meta name="theme-color" content="#ffffff"/>
<style>
@import url("https://use.typekit.net/zuk4pzv.css");
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:"minion-pro",serif;background:#fff;}
a{color:inherit;text-decoration:none;transition:color .3s;}
a:hover{color:#a3a3a3;}
.fixed-image img{width:100%;height:auto;cursor:pointer;display:block;margin-bottom:8px;}
.caption-group{display:flex;flex-direction:column;font-size:12px;margin-top:10px;}
.caption-group div{margin-bottom:5px;}
.footer{position:fixed;bottom:0;width:100%;height:100px;background:transparent;display:flex;justify-content:space-between;align-items:center;padding:0 30px;font-size:12px;}
.image-viewer{position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.85);display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;transition:opacity .3s;z-index:5000;}
.image-viewer.active{opacity:1;visibility:visible;}
.image-viewer img{max-width:90%;max-height:90%;object-fit:contain;box-shadow:0 0 20px rgba(0,0,0,0.5);}
.image-viewer::after{content:'Ã—';position:fixed;top:20px;right:30px;font-size:28px;color:#fff;cursor:pointer;}
</style>
</head>
<body>
<div class="fixed-image" id="fixedImage"></div>
<div class="caption-group" id="captionBox"></div>
<div class="footer">
<a href="/test/">back</a>
<div id="listButton" onclick="toggleSlideBox()">list</div>
</div>
<div class="image-viewer" id="imageViewer"><img src="" alt="viewer image"/></div>
<script>
async function loadDetail(){
const res=await fetch("../data.json");
const data=await res.json();
const pathParts=window.location.pathname.split("/");
const idx=parseInt(pathParts[pathParts.length-2],10)-1;
const item=data[idx];if(!item)return;
const fixed=document.getElementById("fixedImage");
fixed.innerHTML="";
item.images.forEach(src=>{
const img=document.createElement("img");
img.src=src;
img.alt=item.title;
fixed.appendChild(img);
});
const captionBox=document.getElementById("captionBox");
captionBox.innerHTML="";
item.captions.forEach(c=>{
const div=document.createElement("div");div.textContent=c;captionBox.appendChild(div);
});
const viewer=document.getElementById("imageViewer");
const viewerImg=viewer.querySelector("img");
document.querySelectorAll(".fixed-image img").forEach(img=>{
img.addEventListener("click",()=>{viewerImg.src=img.src;viewer.classList.add("active");});
});
viewer.addEventListener("click",()=>viewer.classList.remove("active"));
document.addEventListener("keydown",e=>{if(e.key==="Escape")viewer.classList.remove("active");});
}
document.addEventListener("DOMContentLoaded",loadDetail);
function toggleSlideBox(){alert("slide box toggle");}
</script>
</body>
</html>
