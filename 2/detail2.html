<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>상세페이지</title>
<link rel="icon" type="image/png" href="/test/images/fav2.png" />
<meta name="theme-color" content="#ffffff" />
<style>
  @import url("https://use.typekit.net/zuk4pzv.css");
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family:"minion-pro",serif;background:#fff;}
  a{color:inherit;text-decoration:none;}
  .fixed-image img{width:100%;height:auto;cursor:pointer;display:block;margin-bottom:8px;}
  .footer{position:fixed;bottom:0;width:100%;height:100px;display:flex;justify-content:space-between;align-items:center;padding:0 30px;}
  .slide-box{position:fixed;top:0;right:0;width:373px;height:100%;background:#fff;transform:translateX(100%);transition:transform .3s;overflow-y:auto;padding:10px;}
  .slide-box.active{transform:translateX(0);}
  .caption-group{display:flex;flex-direction:column;font-size:12px;margin-top:10px;}
  .caption1{font-size:20px;margin-bottom:3px;}
  .caption2{font-size:12px;margin-bottom:20px;}
</style>
</head>
<body>
  <div class="fixed-image" id="imageContainer"></div>
  <div class="slide-box" id="slideBox">
    <div class="slide-list" id="slideToggleText" onclick="toggleSlideBox()">list</div>
    <div class="caption-group" id="captionBox"></div>
  </div>
  <div class="footer">
    <div><a href="/test/">back</a></div>
    <div id="listButton" onclick="toggleSlideBox()">list</div>
  </div>

<script>
async function loadDetail(){
  const res = await fetch("../data.json");
  const data = await res.json();
  const pathParts = window.location.pathname.split("/");
  const idx = parseInt(pathParts[pathParts.length-2],10)-1;
  const item = data[idx];
  if(!item) return;

  const container = document.getElementById("imageContainer");
  container.innerHTML = "";
  item.images.forEach(src=>{
    const img = document.createElement("img");
    img.src = src;
    container.appendChild(img);
  });

  const captionBox = document.getElementById("captionBox");
  captionBox.innerHTML = `
    <div class="caption1">${item.title}</div>
    <div class="caption2">${item.year}, ${item.category}</div>
    <div class="caption3">${item.desc1 || ""}</div>
    <div class="caption4">${item.desc2 || ""}</div>
    <div class="caption5">${item.desc3 || ""}</div>
  `;
}

function toggleSlideBox(){
  const sb = document.getElementById('slideBox');
  const txt = document.getElementById('slideToggleText');
  sb.classList.toggle('active');
  txt.textContent = sb.classList.contains('active') ? 'close':'list';
  document.getElementById('listButton').textContent = txt.textContent;
}

document.addEventListener("DOMContentLoaded",loadDetail);
</script>
</body>
</html>
